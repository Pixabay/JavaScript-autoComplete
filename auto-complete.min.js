// JavaScript autoComplete v1.0.5
// https://github.com/Pixabay/JavaScript-autoComplete
var autoComplete=function(){return function(e){function t(e,t){return e.classList?e.classList.contains(t):new RegExp("\\b"+t+"\\b").test(e.className)}function o(e,t,o){e.attachEvent?e.attachEvent("on"+t,o):e.addEventListener(t,o)}function s(e,t,o){e.detachEvent?e.detachEvent("on"+t,o):e.removeEventListener(t,o)}function n(e,s,n,l){o(l||document,s,function(o){for(var s,l=o.target||o.srcElement;l&&!(s=t(l,e));)l=l.parentElement;s&&n.call(l,o)})}if(document.querySelector){var l={selector:0,source:0,minChars:3,delay:150,offsetLeft:0,offsetTop:1,cache:1,menuClass:"",renderItem:function(e,t){t=t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");var o=new RegExp("("+t.split(" ").join("|")+")","gi");return'<div class="autocomplete-suggestion" data-val="'+e+'">'+e.replace(o,"<b>$1</b>")+"</div>"},onSelect:function(e,t,o){}};for(var c in e)e.hasOwnProperty(c)&&(l[c]=e[c]);for(var a="object"==typeof l.selector?[l.selector]:document.querySelectorAll(l.selector),u=0;u<a.length;u++)!function(e){e.sc=document.createElement("div"),e.sc.className="autocomplete-suggestions "+l.menuClass,e.autocompleteAttr=e.getAttribute("autocomplete"),e.setAttribute("autocomplete","off"),e.cache={},e.last_val="",e.updateSC=function(t,o){var s=e.getBoundingClientRect();if(e.sc.style.left=Math.round(s.left+(window.pageXOffset||document.documentElement.scrollLeft)+l.offsetLeft)+"px",e.sc.style.top=Math.round(s.bottom+(window.pageYOffset||document.documentElement.scrollTop)+l.offsetTop)+"px",e.sc.style.width=Math.round(s.right-s.left)+"px",!t&&(e.sc.style.display="block",e.sc.maxHeight||(e.sc.maxHeight=parseInt((window.getComputedStyle?getComputedStyle(e.sc,null):e.sc.currentStyle).maxHeight)),e.sc.suggestionHeight||(e.sc.suggestionHeight=e.sc.querySelector(".autocomplete-suggestion").offsetHeight),e.sc.suggestionHeight))if(o){var n=e.sc.scrollTop,c=o.getBoundingClientRect().top-e.sc.getBoundingClientRect().top;c+e.sc.suggestionHeight-e.sc.maxHeight>0?e.sc.scrollTop=c+e.sc.suggestionHeight+n-e.sc.maxHeight:c<0&&(e.sc.scrollTop=c+n)}else e.sc.scrollTop=0},o(window,"resize",e.updateSC),document.body.appendChild(e.sc),n("autocomplete-suggestion","mouseleave",function(t){var o=e.sc.querySelector(".autocomplete-suggestion.selected");o&&setTimeout(function(){o.className=o.className.replace("selected","")},20)},e.sc),n("autocomplete-suggestion","mouseover",function(t){var o=e.sc.querySelector(".autocomplete-suggestion.selected");o&&(o.className=o.className.replace("selected","")),this.className+=" selected"},e.sc),n("autocomplete-suggestion","mousedown",function(o){if(t(this,"autocomplete-suggestion")){var s=this.getAttribute("data-val");e.value=s,l.onSelect(o,s,this),e.sc.style.display="none"}},e.sc),e.blurHandler=function(){try{t=document.querySelector(".autocomplete-suggestions:hover")}catch(e){var t=0}t?e!==document.activeElement&&setTimeout(function(){e.focus()},20):(e.last_val=e.value,e.sc.style.display="none",setTimeout(function(){e.sc.style.display="none"},350))},o(e,"blur",e.blurHandler);var s=function(t){var o=e.value;if(e.cache[o]=t,t.length&&o.length>=l.minChars){for(var s="",n=0;n<t.length;n++)s+=l.renderItem(t[n],o);e.sc.innerHTML=s,e.updateSC(0)}else e.sc.style.display="none"};e.keydownHandler=function(t){var o=window.event?t.keyCode:t.which;if((40==o||38==o)&&e.sc.innerHTML){var s;return(n=e.sc.querySelector(".autocomplete-suggestion.selected"))?(s=40==o?n.nextSibling:n.previousSibling)?(n.className=n.className.replace("selected",""),s.className+=" selected",e.value=s.getAttribute("data-val")):(n.className=n.className.replace("selected",""),e.value=e.last_val,s=0):((s=40==o?e.sc.querySelector(".autocomplete-suggestion"):e.sc.childNodes[e.sc.childNodes.length-1]).className+=" selected",e.value=s.getAttribute("data-val")),e.updateSC(0,s),!1}if(27==o)e.value=e.last_val,e.sc.style.display="none";else if(13==o||9==o){var n=e.sc.querySelector(".autocomplete-suggestion.selected");n&&"none"!=e.sc.style.display&&(l.onSelect(t,n.getAttribute("data-val"),n),setTimeout(function(){e.sc.style.display="none"},20))}},o(e,"keydown",e.keydownHandler),e.keyupHandler=function(t){var o=window.event?t.keyCode:t.which;if(!o||(o<35||o>40)&&13!=o&&27!=o){var n=e.value;if(n.length>=l.minChars){if(n!=e.last_val){if(e.last_val=n,clearTimeout(e.timer),l.cache){if(n in e.cache)return void s(e.cache[n]);for(var c=1;c<n.length-l.minChars;c++){var a=n.slice(0,n.length-c);if(a in e.cache&&!e.cache[a].length)return void s([])}}e.timer=setTimeout(function(){l.source(n,s)},l.delay)}}else e.last_val=n,e.sc.style.display="none"}},o(e,"keyup",e.keyupHandler),e.focusHandler=function(t){e.last_val="\n",e.keyupHandler(t)},l.minChars||o(e,"focus",e.focusHandler)}(a[u]);this.destroy=function(){for(var e=0;e<a.length;e++){var t=a[e];s(window,"resize",t.updateSC),s(t,"blur",t.blurHandler),s(t,"focus",t.focusHandler),s(t,"keydown",t.keydownHandler),s(t,"keyup",t.keyupHandler),t.autocompleteAttr?t.setAttribute("autocomplete",t.autocompleteAttr):t.removeAttribute("autocomplete"),document.body.removeChild(t.sc),t=null}}}}}();"function"==typeof define&&define.amd?define("autoComplete",function(){return autoComplete}):"undefined"!=typeof module&&module.exports?module.exports=autoComplete:window.autoComplete=autoComplete;